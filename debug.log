[29/Jul/2019 12:03:28] readthedocs.api.v2.client:67[61586]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:03:28] git.cmd:722[61586]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:03:28] git.cmd:722[61586]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:04:05] readthedocs.api.v2.client:67[61592]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:04:05] git.cmd:722[61592]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:04:05] git.cmd:722[61592]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:34] readthedocs.api.v2.client:67[61599]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:05:34] git.cmd:722[61599]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:34] git.cmd:722[61599]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:48] readthedocs.api.v2.client:67[61605]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:05:48] git.cmd:722[61605]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:48] git.cmd:722[61605]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:50] readthedocs.api.v2.client:67[61611]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:05:50] git.cmd:722[61611]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:05:50] git.cmd:722[61611]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:07:18] readthedocs.api.v2.client:67[61646]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:07:18] git.cmd:722[61646]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:07:18] git.cmd:722[61646]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:07:20] readthedocs.api.v2.client:67[61652]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:07:20] git.cmd:722[61652]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:07:20] git.cmd:722[61652]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:07:33] django.request:152[61652]: WARNING Not Found: /favicon.ico
[29/Jul/2019 12:46:27] readthedocs.api.v2.client:67[76079]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:46:27] git.cmd:722[76079]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:46:27] git.cmd:722[76079]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:46:29] readthedocs.api.v2.client:67[76085]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:46:29] git.cmd:722[76085]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:46:29] git.cmd:722[76085]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:47:19] readthedocs.api.v2.client:67[76123]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:47:19] git.cmd:722[76123]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:47:19] git.cmd:722[76123]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:47:21] readthedocs.api.v2.client:67[76129]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 12:47:21] git.cmd:722[76129]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 12:47:21] git.cmd:722[76129]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 14:59:10] readthedocs.api.v2.client:67[76283]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 14:59:10] git.cmd:722[76283]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 14:59:10] git.cmd:722[76283]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 14:59:12] readthedocs.api.v2.client:67[76289]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 14:59:12] git.cmd:722[76289]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 14:59:12] git.cmd:722[76289]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:00:04] readthedocs.api.v2.client:67[76345]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:00:04] git.cmd:722[76345]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:00:04] git.cmd:722[76345]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:00:06] readthedocs.api.v2.client:67[76351]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:00:06] git.cmd:722[76351]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:00:06] git.cmd:722[76351]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:03:13] readthedocs.api.v2.client:67[76422]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:03:13] git.cmd:722[76422]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:03:13] git.cmd:722[76422]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:03:14] readthedocs.api.v2.client:67[76428]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:03:14] git.cmd:722[76428]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:03:14] git.cmd:722[76428]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:09:58] readthedocs.api.v2.client:67[76524]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:09:58] git.cmd:722[76524]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:09:58] git.cmd:722[76524]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:10:00] readthedocs.api.v2.client:67[76530]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:10:00] git.cmd:722[76530]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:10:00] git.cmd:722[76530]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:11:48] readthedocs.api.v2.client:67[76548]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:11:48] git.cmd:722[76548]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:11:48] git.cmd:722[76548]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:11:50] readthedocs.api.v2.client:67[76554]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:11:50] git.cmd:722[76554]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:11:50] git.cmd:722[76554]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:04] readthedocs.api.v2.client:67[76663]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:21:04] git.cmd:722[76663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:04] git.cmd:722[76663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:05] readthedocs.api.v2.client:67[76669]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:21:05] git.cmd:722[76669]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:05] git.cmd:722[76669]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:34] readthedocs.api.v2.client:67[76685]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:21:34] git.cmd:722[76685]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:34] git.cmd:722[76685]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:36] readthedocs.api.v2.client:67[76691]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[29/Jul/2019 15:21:36] git.cmd:722[76691]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[29/Jul/2019 15:21:36] git.cmd:722[76691]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:14:16] readthedocs.api.v2.client:67[663]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[01/Aug/2019 20:14:17] git.cmd:722[663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:14:18] git.cmd:722[663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:14:25] readthedocs.api.v2.client:67[1164]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[01/Aug/2019 20:14:26] git.cmd:722[1164]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:14:26] git.cmd:722[1164]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:34:18] readthedocs.api.v2.client:67[663]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[01/Aug/2019 20:34:18] git.cmd:722[663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:34:18] git.cmd:722[663]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:34:21] readthedocs.api.v2.client:67[1169]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[01/Aug/2019 20:34:21] git.cmd:722[1169]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:34:21] git.cmd:722[1169]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[01/Aug/2019 20:36:47] django.request:135[1169]: ERROR Internal Server Error: /accounts/github/login/
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/django/core/handlers/exception.py", line 41, in inner
    response = get_response(request)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/django/core/handlers/base.py", line 187, in _get_response
    response = self.process_exception_by_middleware(e, request)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/django/core/handlers/base.py", line 185, in _get_response
    response = wrapped_callback(request, *callback_args, **callback_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/allauth/socialaccount/providers/oauth2/views.py", line 73, in view
    return self.dispatch(request, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/allauth/socialaccount/providers/oauth2/views.py", line 96, in dispatch
    app = provider.get_app(self.request)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/allauth/socialaccount/providers/base.py", line 52, in get_app
    return SocialApp.objects.get_current(self.id, request)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/allauth/socialaccount/models.py", line 34, in get_current
    provider=provider)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/django/db/models/manager.py", line 85, in manager_method
    return getattr(self.get_queryset(), name)(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/django/db/models/query.py", line 380, in get
    self.model._meta.object_name
allauth.socialaccount.models.DoesNotExist: SocialApp matching query does not exist.
[01/Aug/2019 20:36:47] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 12:00:27] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:24:15] readthedocs.core.symlink:360[1169]: DEBUG (Build) [firstdoc:] Symlinking Version: Version latest of FirstDoc (1)
[02/Aug/2019 22:24:15] readthedocs.doc_builder.environments:142[1169]: INFO Running: 'ln -nsf /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/rtd-builds/latest /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/public_web_root/firstdoc/en/latest' [/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org]
[02/Aug/2019 22:24:15] celery.app.trace:124[1169]: INFO Task readthedocs.projects.tasks.symlink_project[a182b62c-065a-4c85-afd7-68d9d154ef88] succeeded in 0.11157175499829464s: None
[02/Aug/2019 22:24:15] readthedocs.projects.models:436[1169]: INFO Re-symlinking project and subprojects: project=firstdoc
[02/Aug/2019 22:24:15] readthedocs.core.symlink:360[1169]: DEBUG (Build) [firstdoc:] Symlinking Version: Version latest of FirstDoc (1)
[02/Aug/2019 22:24:15] readthedocs.doc_builder.environments:142[1169]: INFO Running: 'ln -nsf /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/rtd-builds/latest /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/public_web_root/firstdoc/en/latest' [/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org]
[02/Aug/2019 22:24:15] celery.app.trace:124[1169]: INFO Task readthedocs.projects.tasks.symlink_project[3ef6be60-ed08-40b4-95d6-9aa25b8d5134] succeeded in 0.029046462004771456s: None
[02/Aug/2019 22:24:15] readthedocs.projects.models:445[1169]: INFO Re-symlinking superprojects: project=firstdoc
[02/Aug/2019 22:24:15] readthedocs.projects.tasks:1723[1169]: INFO (Build) [firstdoc:] Updating static metadata
[02/Aug/2019 22:24:15] readthedocs.projects.tasks:1747[1169]: DEBUG (Build) [firstdoc:] Cannot write to metadata.json: [Errno 2] No such file or directory: '/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/metadata.json'
[02/Aug/2019 22:24:15] celery.app.trace:124[1169]: INFO Task readthedocs.projects.tasks.update_static_metadata[af98b354-1b03-40ef-8822-b1e59fdc6afa] succeeded in 0.01871574399410747s: None
[02/Aug/2019 22:24:15] readthedocs.oauth.tasks:68[1169]: WARNING There are no registered services in the application.
[02/Aug/2019 22:24:15] celery.app.trace:124[1169]: INFO Task readthedocs.oauth.tasks.attach_webhook[95cd70b9-c3c8-4b08-96fd-0e0c24270ba9] succeeded in 0.02730388099735137s: None
[02/Aug/2019 22:24:15] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (1): 127.0.0.1:8000
[02/Aug/2019 22:24:15] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:15] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc270940>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:15] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (2): 127.0.0.1:8000
[02/Aug/2019 22:24:15] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:16] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc2765c0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:16] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (3): 127.0.0.1:8000
[02/Aug/2019 22:24:16] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:18] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc2768d0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:18] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (4): 127.0.0.1:8000
[02/Aug/2019 22:24:18] readthedocs.projects.tasks:401[1169]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:24:18] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (5): 127.0.0.1:8000
[02/Aug/2019 22:24:18] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:18] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc21bba8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:18] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (6): 127.0.0.1:8000
[02/Aug/2019 22:24:18] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:19] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc21beb8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:19] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (7): 127.0.0.1:8000
[02/Aug/2019 22:24:19] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:21] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1960f0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:21] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (8): 127.0.0.1:8000
[02/Aug/2019 22:24:21] readthedocs.projects.tasks:1457[1169]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc196320>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc196320>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc196320>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:24:21] celery.app.trace:249[1169]: ERROR Task readthedocs.projects.tasks.update_docs_task[ce432d6f-26cf-4c00-a8d9-b9021007780d] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc276ac8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[02/Aug/2019 22:24:37] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (9): 127.0.0.1:8000
[02/Aug/2019 22:24:37] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:37] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bd198>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:37] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (10): 127.0.0.1:8000
[02/Aug/2019 22:24:37] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:38] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bd2b0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:38] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (11): 127.0.0.1:8000
[02/Aug/2019 22:24:38] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:40] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bd748>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:40] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (12): 127.0.0.1:8000
[02/Aug/2019 22:24:40] readthedocs.projects.tasks:401[1169]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:24:40] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (13): 127.0.0.1:8000
[02/Aug/2019 22:24:40] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:40] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdf98>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:40] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (14): 127.0.0.1:8000
[02/Aug/2019 22:24:40] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:41] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc141b70>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:41] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (15): 127.0.0.1:8000
[02/Aug/2019 22:24:41] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:24:43] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc141c88>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:24:43] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (16): 127.0.0.1:8000
[02/Aug/2019 22:24:43] readthedocs.projects.tasks:1457[1169]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc141518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc141518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc141518>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:24:43] celery.app.trace:249[1169]: ERROR Task readthedocs.projects.tasks.update_docs_task[9081cd85-5fc8-416a-91c1-7b3004814386] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc1bdb70>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[02/Aug/2019 22:25:45] readthedocs.core.views.serve:262[1169]: INFO Serving en/latest/index.html for FirstDoc
[02/Aug/2019 22:25:45] django.request:152[1169]: WARNING Not Found: /docs/firstdoc/en/latest/
[02/Aug/2019 22:28:55] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:29:25] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:30:29] readthedocs.core.views.serve:262[1169]: INFO Serving en/latest/index.html for FirstDoc
[02/Aug/2019 22:30:29] django.request:152[1169]: WARNING Not Found: /docs/firstdoc/en/latest/
[02/Aug/2019 22:30:29] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:42:52] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (17): 127.0.0.1:8000
[02/Aug/2019 22:42:52] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:52] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b776eeb8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:52] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (18): 127.0.0.1:8000
[02/Aug/2019 22:42:52] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:53] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b776e748>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:53] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (19): 127.0.0.1:8000
[02/Aug/2019 22:42:53] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:55] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b776edd8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:55] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (20): 127.0.0.1:8000
[02/Aug/2019 22:42:55] readthedocs.projects.tasks:401[1169]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:42:55] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (21): 127.0.0.1:8000
[02/Aug/2019 22:42:55] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:55] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3df278>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:55] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (22): 127.0.0.1:8000
[02/Aug/2019 22:42:55] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:56] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3df4e0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:56] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (23): 127.0.0.1:8000
[02/Aug/2019 22:42:56] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:42:58] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3df518>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:42:58] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (24): 127.0.0.1:8000
[02/Aug/2019 22:42:58] readthedocs.projects.tasks:1457[1169]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc043080>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc043080>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc043080>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:42:58] celery.app.trace:249[1169]: ERROR Task readthedocs.projects.tasks.update_docs_task[5a5f7775-8e8e-45a0-be41-083129531ba3] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3dfc18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[02/Aug/2019 22:47:43] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:47:53] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:48:53] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:50:32] django.request:152[1169]: WARNING Not Found: /favicon.ico
[02/Aug/2019 22:58:49] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (25): 127.0.0.1:8000
[02/Aug/2019 22:58:49] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:49] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc058518>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:49] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (26): 127.0.0.1:8000
[02/Aug/2019 22:58:49] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:50] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0587b8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:50] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (27): 127.0.0.1:8000
[02/Aug/2019 22:58:50] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:52] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc058080>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:52] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (28): 127.0.0.1:8000
[02/Aug/2019 22:58:52] readthedocs.projects.tasks:401[1169]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:58:52] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (29): 127.0.0.1:8000
[02/Aug/2019 22:58:52] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:52] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bf31c400>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:52] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (30): 127.0.0.1:8000
[02/Aug/2019 22:58:52] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:53] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bf31cb00>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:53] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (31): 127.0.0.1:8000
[02/Aug/2019 22:58:53] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:58:55] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bf31c470>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:58:55] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (32): 127.0.0.1:8000
[02/Aug/2019 22:58:55] readthedocs.projects.tasks:1457[1169]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7b7782630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7782630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7782630>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:58:55] celery.app.trace:249[1169]: ERROR Task readthedocs.projects.tasks.update_docs_task[f5a2630e-7bd9-42fa-a6b7-2bd0d7401af0] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263208>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[02/Aug/2019 22:59:41] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (33): 127.0.0.1:8000
[02/Aug/2019 22:59:41] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:41] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0f7048>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:41] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (34): 127.0.0.1:8000
[02/Aug/2019 22:59:41] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:42] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc263d68>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:42] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (35): 127.0.0.1:8000
[02/Aug/2019 22:59:42] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:44] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7ec55c0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:44] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (36): 127.0.0.1:8000
[02/Aug/2019 22:59:44] readthedocs.projects.tasks:401[1169]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:59:44] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (37): 127.0.0.1:8000
[02/Aug/2019 22:59:44] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:44] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc3c8ac8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:44] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (38): 127.0.0.1:8000
[02/Aug/2019 22:59:44] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:45] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0c2518>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:45] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (39): 127.0.0.1:8000
[02/Aug/2019 22:59:45] urllib3.util.retry:401[1169]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 22:59:47] urllib3.connectionpool:665[1169]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0c2dd8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 22:59:47] urllib3.connectionpool:206[1169]: DEBUG Starting new HTTP connection (40): 127.0.0.1:8000
[02/Aug/2019 22:59:47] readthedocs.projects.tasks:1457[1169]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7bc0c2668>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0c2668>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7bc0c2668>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 22:59:47] celery.app.trace:249[1169]: ERROR Task readthedocs.projects.tasks.update_docs_task[83915262-4165-472b-9849-6b6533d04c2c] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff7b7730588>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[02/Aug/2019 23:00:25] readthedocs.api.v2.client:67[650]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[02/Aug/2019 23:00:25] git.cmd:722[650]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[02/Aug/2019 23:00:25] git.cmd:722[650]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[02/Aug/2019 23:00:28] readthedocs.api.v2.client:67[1198]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[02/Aug/2019 23:00:29] git.cmd:722[1198]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[02/Aug/2019 23:00:29] git.cmd:722[1198]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[02/Aug/2019 23:01:25] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (1): 127.0.0.1:8000
[02/Aug/2019 23:01:25] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:25] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc48d0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:25] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (2): 127.0.0.1:8000
[02/Aug/2019 23:01:25] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:26] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4358>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:26] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (3): 127.0.0.1:8000
[02/Aug/2019 23:01:26] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:28] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4780>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:28] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (4): 127.0.0.1:8000
[02/Aug/2019 23:01:28] readthedocs.projects.tasks:401[1198]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 23:01:28] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (5): 127.0.0.1:8000
[02/Aug/2019 23:01:28] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:28] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5aa5780>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:28] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (6): 127.0.0.1:8000
[02/Aug/2019 23:01:28] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:29] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5aa5b38>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:29] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (7): 127.0.0.1:8000
[02/Aug/2019 23:01:29] urllib3.util.retry:401[1198]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[02/Aug/2019 23:01:31] urllib3.connectionpool:665[1198]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5aa5d30>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[02/Aug/2019 23:01:31] urllib3.connectionpool:206[1198]: DEBUG Starting new HTTP connection (8): 127.0.0.1:8000
[02/Aug/2019 23:01:31] readthedocs.projects.tasks:1457[1198]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbcc5aa5f28>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5aa5f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5aa5f28>: Failed to establish a new connection: [Errno 111] Connection refused',))
[02/Aug/2019 23:01:31] celery.app.trace:249[1198]: ERROR Task readthedocs.projects.tasks.update_docs_task[cd936164-4994-4195-b358-3e45739d1a55] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7fbcc5bc4630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[04/Aug/2019 11:07:42] readthedocs.api.v2.client:67[655]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[04/Aug/2019 11:07:43] git.cmd:722[655]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[04/Aug/2019 11:07:43] git.cmd:722[655]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[04/Aug/2019 11:07:52] readthedocs.api.v2.client:67[1197]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[04/Aug/2019 11:07:52] git.cmd:722[1197]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[04/Aug/2019 11:07:52] git.cmd:722[1197]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[04/Aug/2019 12:46:01] readthedocs.core.views.serve:262[1197]: INFO Serving en/latest/index.html for FirstDoc
[04/Aug/2019 12:46:01] django.request:152[1197]: WARNING Not Found: /docs/firstdoc/en/latest/
[04/Aug/2019 12:46:01] django.request:152[1197]: WARNING Not Found: /favicon.ico
[04/Aug/2019 19:29:24] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (1): 127.0.0.1:8000
[04/Aug/2019 19:29:24] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:24] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a6039b0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:24] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (2): 127.0.0.1:8000
[04/Aug/2019 19:29:24] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:25] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a603278>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:25] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (3): 127.0.0.1:8000
[04/Aug/2019 19:29:25] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:27] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7908>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:27] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (4): 127.0.0.1:8000
[04/Aug/2019 19:29:27] readthedocs.projects.tasks:401[1197]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))
[04/Aug/2019 19:29:27] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (5): 127.0.0.1:8000
[04/Aug/2019 19:29:27] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:27] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5d5320>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:27] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (6): 127.0.0.1:8000
[04/Aug/2019 19:29:27] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:28] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a24b358>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:28] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (7): 127.0.0.1:8000
[04/Aug/2019 19:29:28] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[04/Aug/2019 19:29:30] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a24bf28>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:29:30] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (8): 127.0.0.1:8000
[04/Aug/2019 19:29:30] readthedocs.projects.tasks:1457[1197]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a695048>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a695048>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a695048>: Failed to establish a new connection: [Errno 111] Connection refused',))
[04/Aug/2019 19:29:30] celery.app.trace:249[1197]: ERROR Task readthedocs.projects.tasks.update_docs_task[1a2bdcb4-d3b5-4096-aea2-559d73527950] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3d7f28>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[04/Aug/2019 19:44:18] readthedocs.projects.models:436[1197]: INFO Re-symlinking project and subprojects: project=firstdoc
[04/Aug/2019 19:44:18] readthedocs.core.symlink:360[1197]: DEBUG (Build) [firstdoc:] Symlinking Version: Version latest of FirstDoc (1)
[04/Aug/2019 19:44:18] readthedocs.doc_builder.environments:142[1197]: INFO Running: 'ln -nsf /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/rtd-builds/latest /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/public_web_root/firstdoc/en/latest' [/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org]
[04/Aug/2019 19:44:18] celery.app.trace:124[1197]: INFO Task readthedocs.projects.tasks.symlink_project[e38f8a4e-5332-4538-b983-d17fdeed5edc] succeeded in 0.07800314900305239s: None
[04/Aug/2019 19:44:18] readthedocs.projects.models:445[1197]: INFO Re-symlinking superprojects: project=firstdoc
[04/Aug/2019 19:44:18] readthedocs.projects.tasks:1723[1197]: INFO (Build) [firstdoc:] Updating static metadata
[04/Aug/2019 19:44:18] readthedocs.projects.tasks:1747[1197]: DEBUG (Build) [firstdoc:] Cannot write to metadata.json: [Errno 2] No such file or directory: '/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/metadata.json'
[04/Aug/2019 19:44:18] celery.app.trace:124[1197]: INFO Task readthedocs.projects.tasks.update_static_metadata[dfc29f6a-7d89-43e5-bd83-4fe41d8f6bc5] succeeded in 0.016700490999937756s: None
[04/Aug/2019 19:44:18] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (9): 127.0.0.1:8000
[04/Aug/2019 19:44:18] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:18] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a034f28>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:18] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (10): 127.0.0.1:8000
[04/Aug/2019 19:44:18] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:19] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a05d6a0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:19] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (11): 127.0.0.1:8000
[04/Aug/2019 19:44:19] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:21] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a05d390>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:21] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (12): 127.0.0.1:8000
[04/Aug/2019 19:44:21] readthedocs.projects.tasks:401[1197]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))
[04/Aug/2019 19:44:21] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (13): 127.0.0.1:8000
[04/Aug/2019 19:44:21] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:21] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a20cdd8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:21] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (14): 127.0.0.1:8000
[04/Aug/2019 19:44:21] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:22] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a20c320>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:22] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (15): 127.0.0.1:8000
[04/Aug/2019 19:44:22] urllib3.util.retry:401[1197]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[04/Aug/2019 19:44:24] urllib3.connectionpool:665[1197]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a39b860>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[04/Aug/2019 19:44:24] urllib3.connectionpool:206[1197]: DEBUG Starting new HTTP connection (16): 127.0.0.1:8000
[04/Aug/2019 19:44:24] readthedocs.projects.tasks:1457[1197]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a3ad5f8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3ad5f8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a3ad5f8>: Failed to establish a new connection: [Errno 111] Connection refused',))
[04/Aug/2019 19:44:24] celery.app.trace:249[1197]: ERROR Task readthedocs.projects.tasks.update_docs_task[638be5bb-a8e2-4d24-8da6-fc7306912ac2] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=8000): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f255a5e9e80>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[04/Aug/2019 19:44:57] django.request:152[1197]: WARNING Not Found: /favicon.ico
[05/Aug/2019 06:06:59] readthedocs.api.v2.client:67[13901]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1:8000
[05/Aug/2019 06:06:59] git.cmd:722[13901]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 06:06:59] git.cmd:722[13901]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:17:10] readthedocs.api.v2.client:67[13966]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 07:17:10] git.cmd:722[13966]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:17:10] git.cmd:722[13966]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:31] readthedocs.api.v2.client:67[13996]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 07:18:31] git.cmd:722[13996]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:31] git.cmd:722[13996]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:33] readthedocs.api.v2.client:67[14002]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 07:18:34] git.cmd:722[14002]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:34] git.cmd:722[14002]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:54] readthedocs.api.v2.client:67[14027]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 07:18:54] git.cmd:722[14027]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:54] git.cmd:722[14027]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:58] readthedocs.api.v2.client:67[14033]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 07:18:59] git.cmd:722[14033]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:18:59] git.cmd:722[14033]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 07:19:09] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (1): 127.0.0.1:80
[05/Aug/2019 07:19:09] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:09] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1afa400>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:09] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (2): 127.0.0.1:80
[05/Aug/2019 07:19:09] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:10] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af75f8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:10] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (3): 127.0.0.1:80
[05/Aug/2019 07:19:10] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:12] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af70f0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:12] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (4): 127.0.0.1:80
[05/Aug/2019 07:19:12] readthedocs.projects.tasks:401[14033]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 07:19:12] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (5): 127.0.0.1:80
[05/Aug/2019 07:19:12] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:12] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1a89c18>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:12] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (6): 127.0.0.1:80
[05/Aug/2019 07:19:12] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:13] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1a89f98>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:13] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (7): 127.0.0.1:80
[05/Aug/2019 07:19:13] urllib3.util.retry:401[14033]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 07:19:15] urllib3.connectionpool:665[14033]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1a0c208>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 07:19:15] urllib3.connectionpool:206[14033]: DEBUG Starting new HTTP connection (8): 127.0.0.1:80
[05/Aug/2019 07:19:15] readthedocs.projects.tasks:1457[14033]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff1f1a0c3c8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1a0c3c8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1a0c3c8>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 07:19:15] celery.app.trace:249[14033]: ERROR Task readthedocs.projects.tasks.update_docs_task[91576d98-3421-4523-a5bb-3920ff7d1e58] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7ff1f1af7518>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[05/Aug/2019 08:47:16] readthedocs.api.v2.client:67[15088]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 08:47:16] git.cmd:722[15088]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 08:47:16] git.cmd:722[15088]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 08:47:20] readthedocs.api.v2.client:67[15094]: DEBUG Using slumber v2 with user test, pointed at http://127.0.0.1
[05/Aug/2019 08:47:20] git.cmd:722[15094]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 08:47:20] git.cmd:722[15094]: DEBUG Popen(['git', 'version'], cwd=/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org, universal_newlines=False, shell=None, istream=None)
[05/Aug/2019 08:47:29] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (1): 127.0.0.1:80
[05/Aug/2019 08:47:29] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:29] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f894811dc50>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:29] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (2): 127.0.0.1:80
[05/Aug/2019 08:47:29] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:30] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f894811df28>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:30] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (3): 127.0.0.1:80
[05/Aug/2019 08:47:30] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:32] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2160>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:32] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (4): 127.0.0.1:80
[05/Aug/2019 08:47:32] readthedocs.projects.tasks:401[15094]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 08:47:32] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (5): 127.0.0.1:80
[05/Aug/2019 08:47:32] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:32] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480823c8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:32] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (6): 127.0.0.1:80
[05/Aug/2019 08:47:32] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:33] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8948082748>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:33] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (7): 127.0.0.1:80
[05/Aug/2019 08:47:33] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 08:47:35] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8948082940>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 08:47:35] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (8): 127.0.0.1:80
[05/Aug/2019 08:47:35] readthedocs.projects.tasks:1457[15094]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8948082b38>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8948082b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8948082b38>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 08:47:35] celery.app.trace:249[15094]: ERROR Task readthedocs.projects.tasks.update_docs_task[7283871f-bf11-4152-8d57-1cd00c59edb5] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89480c2358>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[05/Aug/2019 09:38:45] readthedocs.projects.models:436[15094]: INFO Re-symlinking project and subprojects: project=firstdoc
[05/Aug/2019 09:38:45] readthedocs.core.symlink:360[15094]: DEBUG (Build) [firstdoc:] Symlinking Version: Version latest of FirstDoc (1)
[05/Aug/2019 09:38:45] readthedocs.doc_builder.environments:142[15094]: INFO Running: 'ln -nsf /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/rtd-builds/latest /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/public_web_root/firstdoc/en/latest' [/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org]
[05/Aug/2019 09:38:45] celery.app.trace:124[15094]: INFO Task readthedocs.projects.tasks.symlink_project[dd993080-2046-430c-9758-e227d1bdd8bf] succeeded in 0.036527000993373804s: None
[05/Aug/2019 09:38:45] readthedocs.projects.models:445[15094]: INFO Re-symlinking superprojects: project=firstdoc
[05/Aug/2019 09:38:45] readthedocs.projects.tasks:1723[15094]: INFO (Build) [firstdoc:] Updating static metadata
[05/Aug/2019 09:38:45] readthedocs.projects.tasks:1747[15094]: DEBUG (Build) [firstdoc:] Cannot write to metadata.json: [Errno 2] No such file or directory: '/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/metadata.json'
[05/Aug/2019 09:38:45] celery.app.trace:124[15094]: INFO Task readthedocs.projects.tasks.update_static_metadata[af86088c-32e3-456a-8752-22ecbb65f0d3] succeeded in 0.017299917002674192s: None
[05/Aug/2019 09:38:45] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (9): 127.0.0.1:80
[05/Aug/2019 09:38:45] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:45] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f795c0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:45] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (10): 127.0.0.1:80
[05/Aug/2019 09:38:45] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:46] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f794a8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:46] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (11): 127.0.0.1:80
[05/Aug/2019 09:38:46] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:48] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f795f8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:48] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (12): 127.0.0.1:80
[05/Aug/2019 09:38:48] readthedocs.projects.tasks:401[15094]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:38:48] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (13): 127.0.0.1:80
[05/Aug/2019 09:38:48] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:48] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79f28>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:48] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (14): 127.0.0.1:80
[05/Aug/2019 09:38:48] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:49] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efe2b0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:49] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (15): 127.0.0.1:80
[05/Aug/2019 09:38:49] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:38:51] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efe4a8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:38:51] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (16): 127.0.0.1:80
[05/Aug/2019 09:38:51] readthedocs.projects.tasks:1457[15094]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942efe6a0>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efe6a0>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efe6a0>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:38:51] celery.app.trace:249[15094]: ERROR Task readthedocs.projects.tasks.update_docs_task[7292f727-88a9-4d33-ab33-7b2a94cfa002] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f79c18>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[05/Aug/2019 09:55:26] readthedocs.projects.models:436[15094]: INFO Re-symlinking project and subprojects: project=firstdoc
[05/Aug/2019 09:55:26] readthedocs.core.symlink:360[15094]: DEBUG (Build) [firstdoc:] Symlinking Version: Version latest of FirstDoc (1)
[05/Aug/2019 09:55:26] readthedocs.doc_builder.environments:142[15094]: INFO Running: 'ln -nsf /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/rtd-builds/latest /home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/public_web_root/firstdoc/en/latest' [/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org]
[05/Aug/2019 09:55:26] celery.app.trace:124[15094]: INFO Task readthedocs.projects.tasks.symlink_project[8f2d476f-2cca-44b5-8004-ce95f49e3e54] succeeded in 0.038384945000871085s: None
[05/Aug/2019 09:55:26] readthedocs.projects.models:445[15094]: INFO Re-symlinking superprojects: project=firstdoc
[05/Aug/2019 09:55:26] readthedocs.projects.tasks:1723[15094]: INFO (Build) [firstdoc:] Updating static metadata
[05/Aug/2019 09:55:26] readthedocs.projects.tasks:1747[15094]: DEBUG (Build) [firstdoc:] Cannot write to metadata.json: [Errno 2] No such file or directory: '/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/user_builds/firstdoc/metadata.json'
[05/Aug/2019 09:55:26] celery.app.trace:124[15094]: INFO Task readthedocs.projects.tasks.update_static_metadata[f0abf958-680d-473a-b114-855977de8550] succeeded in 0.01641240599565208s: None
[05/Aug/2019 09:55:27] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (17): 127.0.0.1:80
[05/Aug/2019 09:55:27] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:27] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d21048>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:27] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (18): 127.0.0.1:80
[05/Aug/2019 09:55:27] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:28] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efee48>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:28] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (19): 127.0.0.1:80
[05/Aug/2019 09:55:28] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:30] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942efeb00>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:30] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (20): 127.0.0.1:80
[05/Aug/2019 09:55:30] readthedocs.projects.tasks:401[15094]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:55:30] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (21): 127.0.0.1:80
[05/Aug/2019 09:55:30] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:30] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa7f0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:30] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (22): 127.0.0.1:80
[05/Aug/2019 09:55:30] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:31] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f71198>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:31] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (23): 127.0.0.1:80
[05/Aug/2019 09:55:31] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:55:33] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942db9a90>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:55:33] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (24): 127.0.0.1:80
[05/Aug/2019 09:55:33] readthedocs.projects.tasks:1457[15094]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942f21dd8>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f21dd8>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f21dd8>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:55:33] celery.app.trace:249[15094]: ERROR Task readthedocs.projects.tasks.update_docs_task[61311050-f8e6-43ce-869e-e79ad6287ea2] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f89481fa630>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
[05/Aug/2019 09:56:34] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (25): 127.0.0.1:80
[05/Aug/2019 09:56:34] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:34] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d62358>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:34] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (26): 127.0.0.1:80
[05/Aug/2019 09:56:34] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:35] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14160>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:35] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (27): 127.0.0.1:80
[05/Aug/2019 09:56:35] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:37] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d142e8>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:37] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (28): 127.0.0.1:80
[05/Aug/2019 09:56:37] readthedocs.projects.tasks:401[15094]: ERROR An unhandled exception was raised during build setup
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:56:37] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (29): 127.0.0.1:80
[05/Aug/2019 09:56:37] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=2, connect=2, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:37] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=2, connect=2, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14fd0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:37] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (30): 127.0.0.1:80
[05/Aug/2019 09:56:37] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=1, connect=1, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:38] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=1, connect=1, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14e48>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:38] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (31): 127.0.0.1:80
[05/Aug/2019 09:56:38] urllib3.util.retry:401[15094]: DEBUG Incremented Retry for (url='/api/v2/version/1/'): Retry(total=0, connect=0, read=3, redirect=None, status=3)
[05/Aug/2019 09:56:40] urllib3.connectionpool:665[15094]: WARNING Retrying (Retry(total=0, connect=0, read=3, redirect=None, status=3)) after connection broken by 'NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942daa5c0>: Failed to establish a new connection: [Errno 111] Connection refused',)': /api/v2/version/1/
[05/Aug/2019 09:56:40] urllib3.connectionpool:206[15094]: DEBUG Starting new HTTP connection (32): 127.0.0.1:80
[05/Aug/2019 09:56:40] readthedocs.projects.tasks:1457[15094]: ERROR Error while fetching the version from the api
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942f11f98>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f11f98>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1455, in clean_build
    version = SyncRepositoryMixin.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942f11f98>: Failed to establish a new connection: [Errno 111] Connection refused',))
[05/Aug/2019 09:56:40] celery.app.trace:249[15094]: ERROR Task readthedocs.projects.tasks.update_docs_task[83597769-39ea-4349-8f20-ced47c60ff2d] raised unexpected: AttributeError("'dict' object has no attribute 'type'",)
Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 160, in _new_conn
    (self._dns_host, self.port), self.timeout, **extra_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 80, in create_connection
    raise err
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/connection.py", line 70, in create_connection
    sock.connect(sa)
ConnectionRefusedError: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 603, in urlopen
    chunked=chunked)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 355, in _make_request
    conn.request(method, url, **httplib_request_kw)
  File "/usr/lib64/python3.6/http/client.py", line 1239, in request
    self._send_request(method, url, body, headers, encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1285, in _send_request
    self.endheaders(body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1234, in endheaders
    self._send_output(message_body, encode_chunked=encode_chunked)
  File "/usr/lib64/python3.6/http/client.py", line 1026, in _send_output
    self.send(msg)
  File "/usr/lib64/python3.6/http/client.py", line 964, in send
    self.connect()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 183, in connect
    conn = self._new_conn()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connection.py", line 169, in _new_conn
    self, "Failed to establish a new connection: %s" % e)
urllib3.exceptions.NewConnectionError: <urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 449, in send
    timeout=timeout
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 670, in urlopen
    **response_kw)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/connectionpool.py", line 641, in urlopen
    _stacktrace=sys.exc_info()[2])
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/urllib3/util/retry.py", line 399, in increment
    raise MaxRetryError(_pool, url, error or ResponseError(cause))
urllib3.exceptions.MaxRetryError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 378, in run
    self.version = self.get_version(version_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 103, in get_version
    version_data = api_v2.version(version_pk).get()
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 155, in get
    resp = self._request("GET", params=kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/slumber/__init__.py", line 97, in _request
    resp = self._store["session"].request(method, url, data=data, params=params, files=files, headers=headers)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 533, in request
    resp = self.send(prep, **send_kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/sessions.py", line 646, in send
    r = adapter.send(request, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/requests/adapters.py", line 516, in send
    raise ConnectionError(e, request=request)
requests.exceptions.ConnectionError: HTTPConnectionPool(host='127.0.0.1', port=80): Max retries exceeded with url: /api/v2/version/1/ (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x7f8942d14b38>: Failed to establish a new connection: [Errno 111] Connection refused',))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/rtd/readthedocs/readthedocs/lib/python3.6/site-packages/celery/app/trace.py", line 375, in trace_task
    R = retval = fun(*args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 293, in update_docs_task
    return step.run(version_pk, *args, **kwargs)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 424, in run
    self.send_notifications(version_pk, build_pk)
  File "/home/rtd/readthedocs/readthedocs/checkouts/readthedocs.org/readthedocs/projects/tasks.py", line 1044, in send_notifications
    if self.version.type != EXTERNAL:
AttributeError: 'dict' object has no attribute 'type'
